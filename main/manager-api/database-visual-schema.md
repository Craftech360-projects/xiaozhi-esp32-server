# Xiaozhi ESP32 Server - Database Visual Schema

## ­Ъје ASCII Art Database Relationship Diagram

```
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                    XIAOZHI ESP32 SERVER DATABASE SCHEMA                                        Рћѓ
Рћѓ                                         16 Tables - 6 Categories                                               Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                        ­Ъћљ SYSTEM MANAGEMENT LAYER                                              Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ     sys_user        РћѓРЌёРћђРћђРћђРћђРћђРћђРћђРћђРћц   sys_user_token    Рћѓ         Рћѓ    sys_params       Рћѓ
    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ  1:1    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ         Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ
    Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ
    Рћѓ ­Ъћњ username (UK)    Рћѓ         Рћѓ ­ЪћЌ user_id (FK)     Рћѓ         Рћѓ ­Ъћњ param_code (UK)  Рћѓ
    Рћѓ    password         Рћѓ         Рћѓ ­Ъћњ token (UK)       Рћѓ         Рћѓ    param_value      Рћѓ
    Рћѓ    super_admin      Рћѓ         Рћѓ    expire_date      Рћѓ         Рћѓ    param_type       Рћѓ
    Рћѓ    status           Рћѓ         Рћѓ    create_date      Рћѓ         Рћѓ    remark           Рћѓ
    Рћѓ    create_date      Рћѓ         Рћѓ    update_date      Рћѓ         Рћѓ    creator          Рћѓ
    Рћѓ    creator          Рћѓ         РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў         Рћѓ    create_date      Рћѓ
    Рћѓ    updater          Рћѓ                                         Рћѓ    updater          Рћѓ
    Рћѓ    update_date      Рћѓ                                         Рћѓ    update_date      Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў                                         РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
            Рћѓ                                                               
            Рћѓ 1:M                                                           
            Рќ╝                                                               
    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ                 
    Рћѓ   sys_dict_type     РћѓРЌёРћђРћђРћђРћђРћђРћђРћђРћђРћц   sys_dict_data     Рћѓ                 
    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ  1:M    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ                 
    Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ                 
    Рћѓ ­Ъћњ dict_type (UK)   Рћѓ         Рћѓ ­ЪћЌ dict_type_id(FK) Рћѓ                 
    Рћѓ    dict_name        Рћѓ         Рћѓ    dict_label       Рћѓ                 
    Рћѓ    remark           Рћѓ         Рћѓ    dict_value       Рћѓ                 
    Рћѓ    sort             Рћѓ         Рћѓ    remark           Рћѓ                 
    Рћѓ    creator          Рћѓ         Рћѓ    sort             Рћѓ                 
    Рћѓ    create_date      Рћѓ         Рћѓ    creator          Рћѓ                 
    Рћѓ    updater          Рћѓ         Рћѓ    create_date      Рћѓ                 
    Рћѓ    update_date      Рћѓ         Рћѓ    updater          Рћѓ                 
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў         Рћѓ    update_date      Рћѓ                 
                                    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў                 

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                      ­Ъцќ AI MODEL CONFIGURATION LAYER                                           Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ ai_model_provider   Рћѓ         Рћѓ  ai_model_config    РћѓРЌёРћђРћђРћђРћђРћђРћђРћђРћђРћц   ai_tts_voice      Рћѓ
    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ         Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ  1:M    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ
    Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ
    Рћѓ    model_type       Рћѓ         Рћѓ    model_type       Рћѓ         Рћѓ ­ЪћЌ tts_model_id(FK) Рћѓ
    Рћѓ    provider_code    Рћѓ         Рћѓ    model_code       Рћѓ         Рћѓ    name             Рћѓ
    Рћѓ    name             Рћѓ         Рћѓ    model_name       Рћѓ         Рћѓ    tts_voice        Рћѓ
    Рћѓ    fields (JSON)    Рћѓ         Рћѓ    is_default       Рћѓ         Рћѓ    languages        Рћѓ
    Рћѓ    sort             Рћѓ         Рћѓ    is_enabled       Рћѓ         Рћѓ    voice_demo       Рћѓ
    Рћѓ    creator          Рћѓ         Рћѓ    config_json      Рћѓ         Рћѓ    remark           Рћѓ
    Рћѓ    create_date      Рћѓ         Рћѓ    doc_link         Рћѓ         Рћѓ    sort             Рћѓ
    Рћѓ    updater          Рћѓ         Рћѓ    remark           Рћѓ         Рћѓ    creator          Рћѓ
    Рћѓ    update_date      Рћѓ         Рћѓ    sort             Рћѓ         Рћѓ    create_date      Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў         Рћѓ    creator          Рћѓ         Рћѓ    updater          Рћѓ
                                    Рћѓ    create_date      Рћѓ         Рћѓ    update_date      Рћѓ
                                    Рћѓ    updater          Рћѓ         РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                                    Рћѓ    update_date      Рћѓ                 
                                    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў                 
                                            Рћѓ                               
                                            Рћѓ M:M (via agent configs)       
                                            Рќ╝                               

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                        ­ЪДа AI AGENT MANAGEMENT LAYER                                            Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ ai_agent_template   РћѓРћђРћђРћђРћђРћђРћђРћђРћђРќ║Рћѓ     ai_agent        РћѓРЌёРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ templateРћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ          Рћѓ
    Рћѓ ­ЪћЉ id (PK)          Рћѓ   base  Рћѓ ­ЪћЉ id (PK)          Рћѓ          Рћѓ
    Рћѓ    agent_code       Рћѓ         Рћѓ ­ЪћЌ user_id (FK)     Рћѓ          Рћѓ 1:M
    Рћѓ    agent_name       Рћѓ         Рћѓ    agent_code       Рћѓ          Рћѓ
    Рћѓ    asr_model_id     Рћѓ         Рћѓ    agent_name       Рћѓ          Рћѓ
    Рћѓ    vad_model_id     Рћѓ         Рћѓ    asr_model_id     Рћѓ          Рћѓ
    Рћѓ    llm_model_id     Рћѓ         Рћѓ    vad_model_id     Рћѓ          Рћѓ
    Рћѓ    vllm_model_id    Рћѓ         Рћѓ    llm_model_id     Рћѓ          Рћѓ
    Рћѓ    tts_model_id     Рћѓ         Рћѓ    vllm_model_id    Рћѓ          Рћѓ
    Рћѓ    tts_voice_id     Рћѓ         Рћѓ    tts_model_id     Рћѓ          Рћѓ
    Рћѓ    mem_model_id     Рћѓ         Рћѓ    tts_voice_id     Рћѓ          Рћѓ
    Рћѓ    intent_model_id  Рћѓ         Рћѓ    mem_model_id     Рћѓ          Рћѓ
    Рћѓ    system_prompt    Рћѓ         Рћѓ    intent_model_id  Рћѓ          Рћѓ
    Рћѓ    lang_code        Рћѓ         Рћѓ    system_prompt    Рћѓ          Рћѓ
    Рћѓ    language         Рћѓ         Рћѓ    lang_code        Рћѓ          Рћѓ
    Рћѓ    sort             Рћѓ         Рћѓ    language         Рћѓ          Рћѓ
    Рћѓ    creator          Рћѓ         Рћѓ    sort             Рћѓ          Рћѓ
    Рћѓ    created_at       Рћѓ         Рћѓ    creator          Рћѓ          Рћѓ
    Рћѓ    updater          Рћѓ         Рћѓ    created_at       Рћѓ          Рћѓ
    Рћѓ    updated_at       Рћѓ         Рћѓ    updater          Рћѓ          Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў         Рћѓ    updated_at       Рћѓ          Рћѓ
                                    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў          Рћѓ
                                            Рћѓ                        Рћѓ
                                            Рћѓ 1:M                    Рћѓ
                                            Рќ╝                        Рћѓ
                                                                     Рћѓ
                                    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ          Рћѓ
                                    Рћѓ     sys_user        РћѓРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                                    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ
                                    Рћѓ ­ЪћЉ id (PK)          Рћѓ
                                    Рћѓ ­Ъћњ username (UK)    Рћѓ
                                    Рћѓ    password         Рћѓ
                                    Рћѓ    super_admin      Рћѓ
                                    Рћѓ    status           Рћѓ
                                    Рћѓ    create_date      Рћѓ
                                    Рћѓ    creator          Рћѓ
                                    Рћѓ    updater          Рћѓ
                                    Рћѓ    update_date      Рћѓ
                                    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                      ­ЪЊ▒ DEVICE MANAGEMENT LAYER                                                Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ     ai_device       РћѓРЌёРћђРћђРћђРћђРћђРћђРћђРћђРћц     ai_agent        Рћѓ
    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ  M:1    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ
    Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ
    Рћѓ ­ЪћЌ user_id (FK)     Рћѓ         Рћѓ ­ЪћЌ user_id (FK)     Рћѓ
    Рћѓ    mac_address      Рћѓ         Рћѓ    agent_code       Рћѓ
    Рћѓ    last_connected   Рћѓ         Рћѓ    agent_name       Рћѓ
    Рћѓ    auto_update      Рћѓ         Рћѓ    asr_model_id     Рћѓ
    Рћѓ    board            Рћѓ         Рћѓ    vad_model_id     Рћѓ
    Рћѓ    alias            Рћѓ         Рћѓ    llm_model_id     Рћѓ
    Рћѓ ­ЪћЌ agent_id (FK)    Рћѓ         Рћѓ    vllm_model_id    Рћѓ
    Рћѓ    app_version      Рћѓ         Рћѓ    tts_model_id     Рћѓ
    Рћѓ    sort             Рћѓ         Рћѓ    tts_voice_id     Рћѓ
    Рћѓ    creator          Рћѓ         Рћѓ    mem_model_id     Рћѓ
    Рћѓ    create_date      Рћѓ         Рћѓ    intent_model_id  Рћѓ
    Рћѓ    updater          Рћѓ         Рћѓ    system_prompt    Рћѓ
    Рћѓ    update_date      Рћѓ         Рћѓ    lang_code        Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў         Рћѓ    language         Рћѓ
            Рћѓ                       Рћѓ    sort             Рћѓ
            Рћѓ 1:M                   Рћѓ    creator          Рћѓ
            Рќ╝                       Рћѓ    created_at       Рћѓ
                                    Рћѓ    updater          Рћѓ
                                    Рћѓ    updated_at       Рћѓ
                                    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                       ­Ъћі VOICE RECOGNITION LAYER                                               Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ   ai_voiceprint     РћѓРЌёРћђРћђРћђРћђРћђРћђРћђРћђРћц     sys_user        РћѓРћђРћђРћђРћђРћђРћђРћђРћђРќ║Рћѓ     ai_agent        Рћѓ
    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ  M:1    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ  1:M    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ
    Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ
    Рћѓ    name             Рћѓ         Рћѓ ­Ъћњ username (UK)    Рћѓ         Рћѓ ­ЪћЌ user_id (FK)     Рћѓ
    Рћѓ ­ЪћЌ user_id (FK)     Рћѓ         Рћѓ    password         Рћѓ         Рћѓ    agent_code       Рћѓ
    Рћѓ ­ЪћЌ agent_id (FK)    Рћѓ         Рћѓ    super_admin      Рћѓ         Рћѓ    agent_name       Рћѓ
    Рћѓ    agent_code       Рћѓ         Рћѓ    status           Рћѓ         Рћѓ    asr_model_id     Рћѓ
    Рћѓ    agent_name       Рћѓ         Рћѓ    create_date      Рћѓ         Рћѓ    vad_model_id     Рћѓ
    Рћѓ    description      Рћѓ         Рћѓ    creator          Рћѓ         Рћѓ    llm_model_id     Рћѓ
    Рћѓ    embedding        Рћѓ         Рћѓ    updater          Рћѓ         Рћѓ    vllm_model_id    Рћѓ
    Рћѓ    memory           Рћѓ         Рћѓ    update_date      Рћѓ         Рћѓ    tts_model_id     Рћѓ
    Рћѓ    sort             Рћѓ         РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў         Рћѓ    tts_voice_id     Рћѓ
    Рћѓ    creator          Рћѓ                                         Рћѓ    mem_model_id     Рћѓ
    Рћѓ    created_at       Рћѓ                                         Рћѓ    intent_model_id  Рћѓ
    Рћѓ    updater          Рћѓ                                         Рћѓ    system_prompt    Рћѓ
    Рћѓ    updated_at       Рћѓ                                         Рћѓ    lang_code        Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў                                         Рћѓ    language         Рћѓ
                                                                    Рћѓ    sort             Рћѓ
                                                                    Рћѓ    creator          Рћѓ
                                                                    Рћѓ    created_at       Рћѓ
                                                                    Рћѓ    updater          Рћѓ
                                                                    Рћѓ    updated_at       Рћѓ
                                                                    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                      ­Ъњг CHAT & COMMUNICATION LAYER                                             Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

                                    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
                                    Рћѓ     sys_user        Рћѓ
                                    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ
                                    Рћѓ ­ЪћЉ id (PK)          Рћѓ
                                    Рћѓ ­Ъћњ username (UK)    Рћѓ
                                    Рћѓ    password         Рћѓ
                                    Рћѓ    super_admin      Рћѓ
                                    Рћѓ    status           Рћѓ
                                    Рћѓ    create_date      Рћѓ
                                    Рћѓ    creator          Рћѓ
                                    Рћѓ    updater          Рћѓ
                                    Рћѓ    update_date      Рћѓ
                                    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                                            Рћѓ
                                            Рћѓ 1:M
                                            Рќ╝
    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ  ai_chat_history    РћѓРЌёРћђРћђРћђРћђРћђРћђРћђРћђРћц     ai_agent        РћѓРћђРћђРћђРћђРћђРћђРћђРћђРќ║Рћѓ     ai_device       Рћѓ
    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ  M:1    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ  1:M    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ
    Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ ­ЪћЉ id (PK)          Рћѓ
    Рћѓ ­ЪћЌ user_id (FK)     Рћѓ         Рћѓ ­ЪћЌ user_id (FK)     Рћѓ         Рћѓ ­ЪћЌ user_id (FK)     Рћѓ
    Рћѓ ­ЪћЌ agent_id (FK)    Рћѓ         Рћѓ    agent_code       Рћѓ         Рћѓ    mac_address      Рћѓ
    Рћѓ ­ЪћЌ device_id (FK)   Рћѓ         Рћѓ    agent_name       Рћѓ         Рћѓ    last_connected   Рћѓ
    Рћѓ    message_count    Рћѓ         Рћѓ    asr_model_id     Рћѓ         Рћѓ    auto_update      Рћѓ
    Рћѓ    creator          Рћѓ         Рћѓ    vad_model_id     Рћѓ         Рћѓ    board            Рћѓ
    Рћѓ    create_date      Рћѓ         Рћѓ    llm_model_id     Рћѓ         Рћѓ    alias            Рћѓ
    Рћѓ    updater          Рћѓ         Рћѓ    vllm_model_id    Рћѓ         Рћѓ ­ЪћЌ agent_id (FK)    Рћѓ
    Рћѓ    update_date      Рћѓ         Рћѓ    tts_model_id     Рћѓ         Рћѓ    app_version      Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў         Рћѓ    tts_voice_id     Рћѓ         Рћѓ    sort             Рћѓ
            Рћѓ                       Рћѓ    mem_model_id     Рћѓ         Рћѓ    creator          Рћѓ
            Рћѓ 1:M                   Рћѓ    intent_model_id  Рћѓ         Рћѓ    create_date      Рћѓ
            Рќ╝                       Рћѓ    system_prompt    Рћѓ         Рћѓ    updater          Рћѓ
    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ         Рћѓ    lang_code        Рћѓ         Рћѓ    update_date      Рћѓ
    Рћѓ  ai_chat_message    Рћѓ         Рћѓ    language         Рћѓ         РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ         Рћѓ    sort             Рћѓ                 Рћѓ
    Рћѓ ­ЪћЉ id (PK)          Рћѓ         Рћѓ    creator          Рћѓ                 Рћѓ via mac_address
    Рћѓ ­ЪћЌ user_id (FK)     Рћѓ         Рћѓ    created_at       Рћѓ                 Рћѓ
    Рћѓ ­ЪћЌ chat_id (FK)     Рћѓ         Рћѓ    updater          Рћѓ                 Рќ╝
    Рћѓ    role (ENUM)      Рћѓ         Рћѓ    updated_at       Рћѓ         РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ    content          Рћѓ         РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў         Рћѓai_agent_chat_historyРћѓ
    Рћѓ    prompt_tokens    Рћѓ                 Рћѓ                       Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ
    Рћѓ    total_tokens     Рћѓ                 Рћѓ 1:M                   Рћѓ ­ЪћЉ id (PK)          Рћѓ
    Рћѓ    completion_tokensРћѓ                 Рќ╝                       Рћѓ    mac_address      Рћѓ
    Рћѓ    prompt_ms        Рћѓ                                         Рћѓ ­ЪћЌ agent_id (FK)    Рћѓ
    Рћѓ    total_ms         Рћѓ                                         Рћѓ    session_id       Рћѓ
    Рћѓ    completion_ms    Рћѓ                                         Рћѓ    chat_type        Рћѓ
    Рћѓ    creator          Рћѓ                                         Рћѓ    content          Рћѓ
    Рћѓ    create_date      Рћѓ                                         Рћѓ ­ЪћЌ audio_id (FK)    Рћѓ
    Рћѓ    updater          Рћѓ                                         Рћѓ    created_at       Рћѓ
    Рћѓ    update_date      Рћѓ                                         Рћѓ    updated_at       Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў                                         РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                                                                            Рћѓ
                                                                            Рћѓ 1:1
                                                                            Рќ╝
                                                                    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
                                                                    Рћѓai_agent_chat_audio  Рћѓ
                                                                    Рћѓ РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ Рћѓ
                                                                    Рћѓ ­ЪћЉ id (PK)          Рћѓ
                                                                    Рћѓ    audio (LONGBLOB) Рћѓ
                                                                    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                         ­ЪЊі RELATIONSHIP SUMMARY                                                Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

­ЪћЌ PRIMARY RELATIONSHIPS:
РћюРћђРћђ sys_user (1) РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ (M) ai_agent           Рћѓ Users own multiple AI agents
РћюРћђРћђ sys_user (1) РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ (M) ai_device          Рћѓ Users own multiple ESP32 devices
РћюРћђРћђ sys_user (1) РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ (M) ai_voiceprint      Рћѓ Users have multiple voiceprints
РћюРћђРћђ sys_user (1) РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ (M) ai_chat_history    Рћѓ Users participate in multiple chats
РћюРћђРћђ sys_user (1) РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ (1) sys_user_token     Рћѓ Each user has one active token
РћюРћђРћђ ai_agent (1) РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ (M) ai_device           Рћѓ Agent can be assigned to multiple devices
РћюРћђРћђ ai_agent (1) РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ (M) ai_chat_history     Рћѓ Agent participates in multiple chats
РћюРћђРћђ ai_agent (1) РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ (M) ai_agent_chat_history Рћѓ Agent has multiple device interactions
РћюРћђРћђ ai_model_config (1) РћђРћђРћђРћђ (M) ai_tts_voice        Рћѓ TTS models have multiple voices
РћћРћђРћђ ai_chat_history (1) РћђРћђРћђРћђ (M) ai_chat_message     Рћѓ Chat sessions contain multiple messages

­ЪћЌ SECONDARY RELATIONSHIPS:
РћюРћђРћђ sys_dict_type (1) РћђРћђРћђРћђРћђРћђРћђРћђ (M) sys_dict_data     Рћѓ Dictionary types contain multiple entries
РћюРћђРћђ ai_agent_template РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ ai_agent            Рћѓ Templates used to create agents
РћюРћђРћђ ai_device РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђ ai_agent_chat_history Рћѓ Devices connect via MAC address
РћћРћђРћђ ai_agent_chat_history (1) РћђРћђ (1) ai_agent_chat_audio Рћѓ Chat entries may have audio data

­ЪћЌ MODEL CONFIGURATION RELATIONSHIPS:
РћюРћђРћђ ai_agent.asr_model_id РћђРћђРћђРћђРћђРћђ ai_model_config.id  Рћѓ Speech Recognition Model
РћюРћђРћђ ai_agent.vad_model_id РћђРћђРћђРћђРћђРћђ ai_model_config.id  Рћѓ Voice Activity Detection Model
РћюРћђРћђ ai_agent.llm_model_id РћђРћђРћђРћђРћђРћђ ai_model_config.id  Рћѓ Large Language Model
РћюРћђРћђ ai_agent.vllm_model_id РћђРћђРћђРћђРћђ ai_model_config.id  Рћѓ Vision Language Model
РћюРћђРћђ ai_agent.tts_model_id РћђРћђРћђРћђРћђРћђ ai_model_config.id  Рћѓ Text-to-Speech Model
РћюРћђРћђ ai_agent.mem_model_id РћђРћђРћђРћђРћђРћђ ai_model_config.id  Рћѓ Memory Model
РћюРћђРћђ ai_agent.intent_model_id РћђРћђРћђ ai_model_config.id  Рћѓ Intent Recognition Model
РћћРћђРћђ ai_agent.tts_voice_id РћђРћђРћђРћђРћђРћђ ai_tts_voice.id     Рћѓ TTS Voice Configuration

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                           ­ЪћЉ LEGEND                                                            Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

SYMBOLS:
­ЪћЉ PK    = Primary Key
­ЪћЌ FK    = Foreign Key
­Ъћњ UK    = Unique Key
(1)      = One (in relationship)
(M)      = Many (in relationship)
РЌёРћђРћђРћђРћђРћђРћђРћђРћђРћц = One-to-Many relationship (arrow points to "One" side)
РћђРћђРћђРћђРћђРћђРћђРћђРќ║ = Many-to-One relationship (arrow points to "One" side)
Рћѓ        = Connection line
Рќ╝        = Relationship flow direction

TABLE CATEGORIES:
­Ъћљ System Management    = User authentication, system configuration
­Ъцќ AI Model Config      = AI model providers, configurations, voices
­ЪДа AI Agent Management  = Agent templates and user-created agents
­ЪЊ▒ Device Management    = ESP32 device information and assignments
­Ъћі Voice Recognition    = Voiceprint storage and recognition
­Ъњг Chat & Communication = Web and device-based chat systems

DATA TYPES:
VARCHAR(n)  = Variable character string
BIGINT      = 64-bit integer
TINYINT     = 8-bit integer
DATETIME    = Date and time
JSON        = JSON object
TEXT        = Large text field
LONGTEXT    = Very large text field
LONGBLOB    = Large binary object
ENUM        = Enumerated values

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                        ­Ъј» SYSTEM FLOW                                                          Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

1. USER REGISTRATION & LOGIN
   sys_user Рєњ sys_user_token (Authentication)

2. AI AGENT CREATION
   sys_user Рєњ ai_agent_template Рєњ ai_agent (Agent setup)
   ai_model_config Рєњ ai_agent (Model assignment)
   ai_tts_voice Рєњ ai_agent (Voice assignment)

3. DEVICE MANAGEMENT
   sys_user Рєњ ai_device (Device ownership)
   ai_agent Рєњ ai_device (Agent assignment)

4. VOICE RECOGNITION
   sys_user Рєњ ai_voiceprint Рєњ ai_agent (Voice training)

5. COMMUNICATION CHANNELS
   A) Web Interface:
      sys_user Рєњ ai_chat_history Рєњ ai_chat_message

   B) Device Interface:
      ai_device Рєњ ai_agent_chat_history Рєњ ai_agent_chat_audio

6. SYSTEM CONFIGURATION
   sys_params (System settings)
   sys_dict_type Рєњ sys_dict_data (System dictionaries)

РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                                      ­ЪЊѕ DATABASE STATISTICS                                                    Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў

TOTAL TABLES: 16
РћюРћђРћђ System Management: 5 tables (31.25%)
РћюРћђРћђ AI Model Config: 3 tables (18.75%)
РћюРћђРћђ AI Agent Management: 2 tables (12.50%)
РћюРћђРћђ Device Management: 1 table (6.25%)
РћюРћђРћђ Voice Recognition: 1 table (6.25%)
РћћРћђРћђ Chat & Communication: 4 tables (25.00%)

RELATIONSHIP TYPES:
РћюРћђРћђ One-to-One: 2 relationships
РћюРћђРћђ One-to-Many: 12 relationships
РћюРћђРћђ Many-to-Many: 7 relationships (via foreign keys)
РћћРћђРћђ Template-based: 1 relationship

KEY FEATURES:
РюЁ Multi-user support with role-based access
РюЁ Modular AI pipeline (7 different model types)
РюЁ Dual communication channels (Web + Device)
РюЁ Voice recognition and personalization
РюЁ Device management with firmware tracking
РюЁ Comprehensive chat history and analytics
РюЁ Flexible system configuration
РюЁ Template-based agent creation

---
Generated: 2025-08-20 | Version: 1.0 | Format: ASCII Art Visualization
